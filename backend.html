<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Backend Walkthrough - Smart Credit Risk System</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üõ°Ô∏è</text></svg>">
    
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Sidebar Navigation -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h1>Smart Credit Risk System</h1>
            <p>ML Documentation</p>
        </div>
        <ul class="sidebar-nav">
            <li><a href="index.html">üè† Home</a></li>
            <li><a href="backend.html" class="active">‚öôÔ∏è Backend Walkthrough</a></li>
            <li><a href="app-explanation.html">üìù app.py Explanation</a></li>
            <li><a href="notebook-explanation.html">üìì Notebook Explanation</a></li>
        
            <li><a href="train-model-explanation.html">ü§ñ train_model.py</a></li>
            <li><a href="shrink-model-explanation.html">üóúÔ∏è shrink_model.py</a></li>
            <li><a href="interface.html">üíª Interface & Deployment</a></li>
            <li><a href="tools.html">üõ†Ô∏è Tools & Dataset</a></li>
            <li><a href="faq.html">‚ùì FAQ & Interview Q&A</a></li>
        </ul>
    </nav>

    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" onclick="toggleSidebar()">‚ò∞</button>

    <!-- Main Content -->
    <main class="main-content">
        <div class="page-header">
            <h1>Backend Walkthrough</h1>
            <p>Understanding how the Flask server processes loan applications and makes predictions</p>
        </div>

        <div class="content-section">
            <h2>Overview</h2>
            <p>
                The backend of our Smart Credit Risk System is built using <strong>Flask</strong>, a lightweight 
                Python web framework. The main file is <code>app.py</code>, which handles all the server logic, 
                model loading, and prediction making.
            </p>
            <p>
                Think of the backend as the "brain" of our system. When a user submits the loan application form, 
                the backend receives the data, processes it, runs it through our trained Machine Learning model, 
                and returns the prediction result.
            </p>
        </div>

        <div class="content-section">
            <h2>1. Imports</h2>
            <p>
                At the top of <code>app.py</code>, we import the necessary libraries:
            </p>
            <div class="code-block">
<code><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, render_template, request
<span class="keyword">import</span> joblib
<span class="keyword">import</span> pandas <span class="keyword">as</span> pd</code>
            </div>
            <h3>What Each Import Does:</h3>
            <ul>
                <li>
                    <strong>Flask:</strong> This is our web framework. It helps us create a web server that can 
                    receive HTTP requests and send responses. <code>render_template</code> is used to display HTML 
                    pages, and <code>request</code> helps us get data from the user's form submission.
                </li>
                <li>
                    <strong>joblib:</strong> This library is used to save and load our trained Machine Learning model. 
                    Think of it as a way to "freeze" our trained model so we can use it later without retraining.
                </li>
                <li>
                    <strong>pandas:</strong> This is a powerful library for working with data. We use it to organize 
                    the user's input into a format that our model can understand (like a table or spreadsheet).
                </li>
            </ul>
        </div>

        <div class="content-section">
            <h2>2. Model Loading</h2>
            <p>
                After importing libraries, we load our pre-trained model:
            </p>
            <div class="code-block">
<code><span class="comment"># Load the trained model (our 'brain')</span>
model = joblib.load(<span class="string">'credit_risk_model.pkl'</span>)</code>
            </div>
            <div class="info-box">
                <h3>üí° How joblib.load Works</h3>
                <p>
                    <code>joblib.load()</code> retrieves the trained Random Forest model from a file called 
                    <code>credit_risk_model.pkl</code>. This file contains all the "knowledge" our model learned 
                    during training - all the patterns it discovered about which loan applicants are safe vs risky.
                </p>
                <p>
                    <strong>Why do we load it once?</strong> Loading the model takes time and memory. By loading it 
                    once when the server starts, we can reuse it for every prediction request without reloading it 
                    each time. This makes our system much faster!
                </p>
            </div>
        </div>

        <div class="content-section">
            <h2>3. Feature Engineering</h2>
            <p>
                Before making a prediction, we need to calculate a special feature called <strong>interest_burden</strong>. 
                This feature helps the model understand how much of a person's income goes toward paying loan interest.
            </p>
            <div class="code-block">
<code><span class="comment"># Calculate interest burden</span>
interest_burden = (loan_amnt * (loan_int_rate / <span class="string">100</span>)) / person_income</code>
            </div>
            <div class="screenshot-container" style="margin: 2rem 0;">
                <img src="image_e50c52.jpg" 
                     alt="Feature Engineering Code - interest_burden calculation" 
                     class="code-screenshot"
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <div class="image-placeholder-message" style="display: none; padding: 2rem; background: var(--light-gray); border-radius: 8px; text-align: center; color: var(--text-gray);">
                    <p>üì∏ <strong>Image not found</strong></p>
                    <p style="margin-top: 0.5rem; font-size: 0.9rem;">Please ensure the file "image_e50c52.jpg" is in the same directory as backend.html</p>
                </div>
            </div>
            <p style="margin-top: 1.5rem; font-style: italic; color: var(--text-gray);">
                <em>Above: Code editor screenshot showing the interest_burden feature engineering logic.</em>
            </p>
            <h3>Breaking Down the Formula:</h3>
            <ul>
                <li>
                    <strong>loan_amnt:</strong> The total amount of money the person wants to borrow
                </li>
                <li>
                    <strong>loan_int_rate:</strong> The annual interest rate (as a percentage, e.g., 5%)
                </li>
                <li>
                    <strong>person_income:</strong> The person's annual income
                </li>
            </ul>
            <p>
                <strong>Example:</strong> If someone wants a $10,000 loan at 5% interest and earns $50,000 per year:
            </p>
            <ul>
                <li>Interest per year = $10,000 √ó (5 / 100) = $500</li>
                <li>Interest burden = $500 / $50,000 = 0.01 (or 1% of income)</li>
            </ul>
            <p>
                A lower interest burden means the person can more easily afford the loan payments, which is a good sign!
            </p>
        </div>

        <div class="content-section">
            <h2>4. Routes</h2>
            <p>
                Routes are like different "pages" or "endpoints" in our web application. Each route handles a specific 
                type of request from the user's browser.
            </p>

            <h3>Route 1: Home Page (<code>@app.route('/')</code>)</h3>
            <div class="code-block">
<code><span class="keyword">@app.route</span>(<span class="string">'/'</span>)
<span class="keyword">def</span> <span class="function">home</span>():
    <span class="keyword">return</span> render_template(<span class="string">'index.html'</span>)</code>
            </div>
            <p>
                This route shows the main form page. When someone visits our website's homepage, Flask displays 
                the <code>index.html</code> file, which contains the loan application form.
            </p>
            <ul>
                <li><code>@app.route('/')</code> means "when someone visits the root URL (like www.example.com/)"</li>
                <li><code>render_template()</code> finds and displays the HTML file</li>
            </ul>

            <h3>Route 2: Prediction Endpoint (<code>@app.route('/predict')</code>)</h3>
            <div class="code-block">
<code><span class="keyword">@app.route</span>(<span class="string">'/predict'</span>, methods=[<span class="string">'POST'</span>])
<span class="keyword">def</span> <span class="function">predict</span>():
    <span class="comment"># Get data from the form</span>
    age = request.form[<span class="string">'age'</span>]
    income = request.form[<span class="string">'person_income'</span>]
    loan_amnt = request.form[<span class="string">'loan_amnt'</span>]
    <span class="comment"># ... more fields ...</span>
    
    <span class="comment"># Prepare data for the model</span>
    features = pd.DataFrame({...})
    
    <span class="comment"># Make prediction</span>
    prediction = model.predict(features)[<span class="string">0</span>]
    probability = model.predict_proba(features)[<span class="string">0</span>]
    
    <span class="comment"># Return result</span>
    <span class="keyword">return</span> render_template(<span class="string">'index.html'</span>, 
                           prediction_text=result)</code>
            </div>
            <h3>How the Prediction Route Works:</h3>
            <ol>
                <li>
                    <strong>Receives Data:</strong> When the user clicks "Submit" on the form, the browser sends 
                    a POST request to <code>/predict</code> with all the form data.
                </li>
                <li>
                    <strong>Extracts Information:</strong> <code>request.form</code> gets each field from the form 
                    (age, income, loan amount, etc.)
                </li>
                <li>
                    <strong>Prepares Data:</strong> We organize the data into a pandas DataFrame (like a table) 
                    that matches the format the model expects.
                </li>
                <li>
                    <strong>Makes Prediction:</strong> <code>model.predict()</code> gives us the answer (SAFE or RISKY), 
                    and <code>model.predict_proba()</code> gives us the confidence percentage.
                </li>
                <li>
                    <strong>Shows Result:</strong> We send the result back to the user's browser, which displays 
                    it on the page using <code>{{ prediction_text }}</code> in the HTML template.
                </li>
            </ol>
        </div>

        <div class="content-section">
            <h2>Summary</h2>
            <p>
                The backend (<code>app.py</code>) is the engine that powers our Smart Credit Risk System:
            </p>
            <ul>
                <li>It loads the trained model when the server starts</li>
                <li>It receives loan application data from users</li>
                <li>It processes and prepares the data (including calculating interest_burden)</li>
                <li>It runs the data through the model to get predictions</li>
                <li>It sends the results back to the user's browser</li>
            </ul>
            <p>
                All of this happens in seconds, making it feel instant to the user!
            </p>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <h3>Connect With Me</h3>
            <p>Follow me on social media for more projects and updates</p>
            <div class="social-links">
                <a href="https://github.com/Tegnh" target="_blank" class="social-link github" title="GitHub">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                </a>
                <a href="https://x.com/6ar_t" target="_blank" class="social-link twitter" title="Twitter/X">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                    </svg>
                </a>
                <a href="https://www.linkedin.com/in/tarig-fdl-7a6599348/" target="_blank" class="social-link linkedin" title="LinkedIn">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                    </svg>
                </a>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 Smart Credit Risk System. Built with ‚ù§Ô∏è by Tegnh</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
</body>
</html>
